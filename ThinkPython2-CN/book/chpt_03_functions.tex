

% \chapter{Functions  |  å‡½æ•°}
\chapter{å‡½æ•°}
\label{funcchap}

%ğŸ% In the context of programming, a {\bf function} is a named sequence of
%ğŸ% statements that performs a computation.  When you define a function,
%ğŸ% you specify the name and the sequence of statements.  Later, you can
%ğŸ% ``call'' the function by name.
%ğŸ% \index{function}

åœ¨ç¼–ç¨‹çš„è¯­å¢ƒä¸‹ï¼Œ{\em å‡½æ•°} (function)  æ˜¯æŒ‡ä¸€ä¸ªæœ‰å‘½åçš„ã€æ‰§è¡ŒæŸä¸ªè®¡ç®—çš„è¯­å¥åºåˆ—(sequence of statements) ã€‚  åœ¨å®šä¹‰ä¸€ä¸ªå‡½æ•°çš„æ—¶å€™ï¼Œä½ éœ€è¦æŒ‡å®šå‡½æ•°çš„åå­—å’Œè¯­å¥åºåˆ—ã€‚  ä¹‹åï¼Œä½ å¯ä»¥é€šè¿‡è¿™ä¸ªåå­—``{\em è°ƒç”¨} (call)''è¯¥å‡½æ•°ã€‚
\index{function}  \index{å‡½æ•°}

%
%%
% \section{Function calls  |  å‡½æ•°è°ƒç”¨}
\section{å‡½æ•°è°ƒç”¨}
\label{functionchap}
\index{function call}
\index{å‡½æ•°è°ƒç”¨}

%ğŸ% We have already seen one example of a {\bf function call}:

æˆ‘ä»¬å·²ç»çœ‹è§è¿‡äº† {\em å‡½æ•°è°ƒç”¨} (function call) çš„ä¾‹å­ã€‚

\begin{lstlisting}
>>> type(42)
<class 'int'>
\end{lstlisting}

%
%ğŸ% The name of the function is {\tt type}.  The expression in parentheses
%ğŸ% is called the {\bf argument} of the function.  The result, for this
%ğŸ% function, is the type of the argument.

è¿™ä¸ªå‡½æ•°çš„åå­—æ˜¯ ``type''ã€‚ æ‹¬å·ä¸­çš„è¡¨è¾¾å¼è¢«ç§°ä¸ºè¿™ä¸ªå‡½æ•°çš„ {\em å®å‚} (argument)ã€‚ è¿™ä¸ªå‡½æ•°æ‰§è¡Œçš„ç»“æœï¼Œå°±æ˜¯å®å‚çš„ç±»å‹ã€‚
\index{parentheses!argument in}
\index{æ‹¬å·!å®å‚}

%ğŸ% It is common to say that a function ``takes'' an argument and ``returns''
%ğŸ% a result.  The result is also called the {\bf return value}.

äººä»¬å¸¸è¯´å‡½æ•°``æ¥å— (accept)''å®å‚ï¼Œç„¶å ``è¿”å› (return)''ä¸€ä¸ªç»“æœã€‚
è¯¥ç»“æœä¹Ÿè¢«ç§°ä¸º {\em è¿”å›å€¼} (return value)ã€‚
\index{argument}  \index{return value}
\index{å®å‚}  \index{è¿”å›å€¼}

%ğŸ% Python provides functions that convert values
%ğŸ% from one type to another.  The {\tt int} function takes any value and
%ğŸ% converts it to an integer, if it can, or complains otherwise:

Pythonæä¾›äº†èƒ½å¤Ÿå°†å€¼ä»ä¸€ç§ç±»å‹è½¬æ¢ä¸ºå¦ä¸€ç§ç±»å‹çš„å†…å»ºå‡½æ•°ã€‚
å‡½æ•° \li{int} æ¥å—ä»»æ„å€¼ï¼Œå¹¶åœ¨å…¶èƒ½åšåˆ°çš„æƒ…å†µä¸‹ï¼Œå°†è¯¥å€¼è½¬æ¢æˆä¸€ä¸ªæ•´å‹æ•°ï¼Œ
å¦åˆ™ä¼šæŠ¥é”™ï¼š
\index{conversion!type}  \index{type conversion}
\index{int function}  \index{function!int}
\index{è½¬æ¢!ç±»å‹}  \index{ç±»å‹è½¬æ¢}
\index{æ•´æ•°å‹å‡½æ•°}  \index{å‡½æ•°!æ•´æ•°å‹}

\begin{lstlisting}
>>> int('32')
32
>>> int('Hello')
ValueError: invalid literal for int(): Hello
\end{lstlisting}

%
%ğŸ% {\tt int} can convert floating-point values to integers, but it
%ğŸ% doesn't round off; it chops off the fraction part:

\li{int} èƒ½å°†æµ®ç‚¹æ•°è½¬æ¢ä¸ºæ•´å‹æ•°ï¼Œä½†æ˜¯å®ƒå¹¶ä¸è¿›è¡Œèˆå…¥ï¼›åªæ˜¯æˆªæ‰äº†å°æ•°ç‚¹éƒ¨åˆ†ï¼š

\begin{lstlisting}
>>> int(3.99999)
3
>>> int(-2.3)
-2
\end{lstlisting}

%
%ğŸ% {\tt float} converts integers and strings to floating-point
%ğŸ% numbers:

\li{float} å¯ä»¥å°†æ•´å‹æ•°å’Œå­—ç¬¦ä¸²è½¬æ¢ä¸ºæµ®ç‚¹æ•°ï¼š
\index{float function}  \index{function!float}
\index{æµ®ç‚¹å‹å‡½æ•°}  \index{å‡½æ•°!æµ®ç‚¹å‹}

\begin{lstlisting}
>>> float(32)
32.0
>>> float('3.14159')
3.14159
\end{lstlisting}

%
%ğŸ% Finally, {\tt str} converts its argument to a string:

\li{str} å¯ä»¥å°†å…¶å®å‚è½¬æ¢æˆå­—ç¬¦ä¸²ï¼š
\index{str function}  \index{function!str}
\index{å­—ç¬¦ä¸²å‡½æ•°}  \index{å‡½æ•°!å­—ç¬¦ä¸²}

\begin{lstlisting}
>>> str(32)
'32'
>>> str(3.14159)
'3.14159'
\end{lstlisting}

%
%%
% \section{Math functions  |  æ•°å­¦å‡½æ•°}
\section{æ•°å­¦å‡½æ•°}
\index{math function}  \index{function, math}
\index{æ•°å­¦å‡½æ•°}  \index{å‡½æ•°, æ•°å­¦}


%ğŸ% Python has a math module that provides most of the familiar
%ğŸ% mathematical functions.  A {\bf module} is a file that contains a
%ğŸ% collection of related functions.

Pythonä¸­æœ‰ä¸€ä¸ªæ•°å­¦å‡½æ•°æ¨¡å—ï¼Œæä¾›äº†å¤§éƒ¨åˆ†å¸¸ç”¨çš„æ•°å­¦å‡½æ•°ã€‚
{\em æ¨¡å—} (module) æ˜¯æŒ‡ä¸€ä¸ªåŒ…å«ç›¸å…³å‡½æ•°é›†åˆçš„æ–‡ä»¶ã€‚
\index{module}  \index{module object}
\index{æ¨¡å—}  \index{æ¨¡å—å¯¹è±¡}

%ğŸ% Before we can use the functions in a module, we have to import it with
%ğŸ% an {\bf import statement}:

åœ¨ä½¿ç”¨æ¨¡å—ä¹‹å‰ï¼Œæˆ‘ä»¬éœ€è¦é€šè¿‡ {\em å¯¼å…¥è¯­å¥} (import statement) å¯¼å…¥è¯¥æ¨¡å—ï¼š

\begin{lstlisting}
>>> import math
\end{lstlisting}

%
%ğŸ% This statement creates a {\bf module object} named math.  If
%ğŸ% you display the module object, you get some information about it:

è¿™æ¡è¯­å¥ä¼šç”Ÿæˆä¸€ä¸ªåä¸º ``math'' çš„ {\em æ¨¡å—å¯¹è±¡} (module object) ã€‚
å¦‚æœä½ æ‰“å°è¿™ä¸ªæ¨¡å—å¯¹è±¡ï¼Œä½ å°†è·å¾—å…³äºå®ƒçš„ä¸€äº›ä¿¡æ¯ï¼š


\begin{lstlisting}
>>> math
<module 'math' (built-in)>
\end{lstlisting}

%
%ğŸ% The module object contains the functions and variables defined in the
%ğŸ% module.  To access one of the functions, you have to specify the name
%ğŸ% of the module and the name of the function, separated by a dot (also
%ğŸ% known as a period).  This format is called {\bf dot notation}.

è¯¥æ¨¡å—å¯¹è±¡åŒ…æ‹¬äº†å®šä¹‰åœ¨æ¨¡å—å†…çš„æ‰€æœ‰å‡½æ•°å’Œå˜é‡ã€‚
æƒ³è¦è®¿é—®å…¶ä¸­çš„ä¸€ä¸ªå‡½æ•°ï¼Œä½ å¿…é¡»æŒ‡å®šè¯¥æ¨¡å—çš„åå­—ä»¥åŠå‡½æ•°åï¼Œ
å¹¶ä»¥ç‚¹å·ï¼ˆä¹Ÿè¢«å«åšå¥å·ï¼‰åˆ†éš”å¼€æ¥ã€‚ è¿™ç§å½¢å¼è¢«ç§°ä½œ {\em ç‚¹æ ‡è®°æ³•} (dot
notation)ã€‚
\index{dot notation}  \index{ç‚¹æ ‡è®°æ³•}

\begin{lstlisting}
>>> ratio = signal_power / noise_power
>>> decibels = 10 * math.log10(ratio)

>>> radians = 0.7
>>> height = math.sin(radians)
\end{lstlisting}

%
%ğŸ% The first example uses \verb"math.log10" to compute
%ğŸ% a signal-to-noise ratio in decibels (assuming that \verb"signal_power" and
%ğŸ% \verb"noise_power" are defined).  The math module also provides {\tt log},
%ğŸ% which computes logarithms base {\tt e}.

ç¬¬ä¸€ä¸ªä¾‹å­ä½¿ç”¨\li{math.log10} è®¡ç®—åˆ†è´ä¿¡å™ªæ¯”ï¼ˆå‡è®¾ \li{signal_power}  å’Œ\li{noise_power} å·²ç»è¢«å®šä¹‰äº†ï¼‰ã€‚
math æ¨¡å—ä¹Ÿæä¾›äº† \li{log} å‡½æ•°ï¼Œç”¨äºè®¡ç®—ä»¥ $e$ ä¸ºåº•çš„å¯¹æ•°ã€‚
\index{log function}  \index{function!log}  \index{sine function}
\index{radian}  \index{trigonometric function}  \index{function, trigonometric}

%ğŸ% The second example finds the sine of {\tt radians}.  The name of the
%ğŸ% variable is a hint that {\tt sin} and the other trigonometric
%ğŸ% functions ({\tt cos}, {\tt tan}, etc.)  take arguments in radians. To
%ğŸ% convert from degrees to radians, divide by 180 and multiply by
%ğŸ% $\pi$:

ç¬¬äºŒä¸ªä¾‹å­è®¡ç®— \li{radians} çš„æ­£å¼¦å€¼ã€‚
å˜é‡åæš—ç¤ºäº† \li{sin} åŠå…¶å®ƒä¸‰è§’å‡½æ•°ï¼ˆ \li{cos}ã€\li{tan} ç­‰ï¼‰æ¥å—å¼§åº¦(radians)å®å‚ã€‚ åº¦æ•°è½¬æ¢ä¸ºå¼§åº¦ï¼Œéœ€è¦é™¤ä»¥$180$ï¼Œå¹¶ä¹˜ä»¥ $\pi$ ï¼š


\begin{lstlisting}
>>> degrees = 45
>>> radians = degrees / 180.0 * math.pi
>>> math.sin(radians)
0.707106781187
\end{lstlisting}

%
%ğŸ% The expression {\tt math.pi} gets the variable {\tt pi} from the math
%ğŸ% module.  Its value is a floating-point approximation
%ğŸ% of $\pi$, accurate to about 15 digits.

è¡¨è¾¾å¼ \li{math.pi} ä» \li{math} æ¨¡å—ä¸­è·å¾—å˜é‡ \li{pi} ã€‚
è¯¥å˜é‡çš„å€¼æ˜¯ $\pi$ çš„ä¸€ä¸ªæµ®ç‚¹æ•°è¿‘ä¼¼å€¼ï¼Œç²¾ç¡®åˆ°å¤§çº¦15ä½æ•°ã€‚
\index{pi}  \index{$\pi$}
\index{åœ†å‘¨ç‡}

%ğŸ% If you know trigonometry, you can check the previous result by comparing it to the square root of two divided by two:

å¦‚æœä½ äº†è§£æ‡‚å‡ ä½•å­¦ (trigonometry) ï¼Œä½ å¯ä»¥å°†ä¹‹å‰çš„ç»“æœå’ŒäºŒåˆ†ä¹‹æ ¹å·äºŒè¿›è¡Œæ¯”è¾ƒï¼Œæ£€æŸ¥æ˜¯å¦æ­£ç¡®ï¼š
\index{sqrt function}  \index{function!sqrt}

\begin{lstlisting}
>>> math.sqrt(2) / 2.0
0.707106781187
\end{lstlisting}
%

%
%%
% \section{Composition  |  æ„å»º}
\section{æ„å»º}
\index{composition}

%ğŸ% So far, we have looked at the elements of a program---variables,
%ğŸ% expressions, and statements---in isolation, without talking about how to
%ğŸ% combine them.

ç›®å‰ä¸ºæ­¢ï¼Œæˆ‘ä»¬å·²ç»åˆ†åˆ«ä»‹ç»äº†ç¨‹åºçš„åŸºæœ¬å…ƒç´  --- å˜é‡ã€è¡¨è¾¾å¼å’Œè¯­å¥ï¼Œä½†æ˜¯è¿˜æ²¡æœ‰è®¨è®ºå¦‚ä½•å°†å®ƒä»¬ç»„åˆåœ¨ä¸€èµ·ã€‚

%ğŸ% One of the most useful features of programming languages is their
%ğŸ% ability to take small building blocks and {\bf compose} them.  For
%ğŸ% example, the argument of a function can be any kind of expression,
%ğŸ% including arithmetic operators:

ç¼–ç¨‹è¯­è¨€çš„æœ€æœ‰ç”¨ç‰¹å¾ä¹‹ä¸€ï¼Œæ˜¯èƒ½å¤Ÿå°†å°å—æ„å»ºææ–™ (building blocks) {\em æ„å»º} (compose) åœ¨ä¸€èµ·ã€‚
ä¾‹å¦‚ï¼Œå‡½æ•°çš„å®å‚å¯ä»¥æ˜¯ä»»æ„ç±»å‹çš„è¡¨è¾¾å¼ï¼ŒåŒ…æ‹¬ç®—æœ¯è¿ç®—ç¬¦ï¼š

\begin{lstlisting}
x = math.sin(degrees / 360.0 * 2 * math.pi)
\end{lstlisting}

%
%ğŸ% And even function calls:

ç”šè‡³æ˜¯å‡½æ•°è°ƒç”¨ï¼š

\begin{lstlisting}
x = math.exp(math.log(x+1))
\end{lstlisting}

%
%ğŸ% Almost anywhere you can put a value, you can put an arbitrary
%ğŸ% expression, with one exception: the left side of an assignment
%ğŸ% statement has to be a variable name.  Any other expression on the left
%ğŸ% side is a syntax error (we will see exceptions to this rule
%ğŸ% later).

å‡ ä¹ä»»ä½•å¯ä»¥æ”¾ä¸€ä¸ªå€¼çš„åœ°æ–¹ï¼Œéƒ½å¯ä»¥æ”¾ä¸€ä¸ªä»»æ„ç±»å‹çš„è¡¨è¾¾å¼ï¼Œé™¤äº†ä¸€ä¸ªä¾‹å¤–ï¼š
èµ‹å€¼è¯­å¥çš„å·¦ä¾§å¿…é¡»æ˜¯ä¸€ä¸ªå˜é‡åã€‚å·¦ä¾§æ”¾å…¶ä»–ä»»ä½•è¡¨è¾¾å¼éƒ½ä¼šäº§ç”Ÿè¯­æ³•é”™è¯¯
ï¼ˆåé¢æˆ‘ä»¬ä¼šè®²åˆ°è¿™ä¸ªè§„åˆ™çš„ä¾‹å¤–ï¼‰ã€‚

\begin{lstlisting}
>>> minutes = hours * 60                 # right
>>> hours * 60 = minutes                 # wrong!
SyntaxError: can't assign to operator
\end{lstlisting}
%
\index{SyntaxError}  \index{exception!SyntaxError}
\index{è¯­æ³•é”™è¯¯}  \index{å¼‚å¸¸!è¯­æ³•é”™è¯¯}

%
%%
% \section{Adding new functions  |  å¢åŠ æ–°å‡½æ•°}
\section{å¢åŠ æ–°å‡½æ•°}

%ğŸ% So far, we have only been using the functions that come with Python,
%ğŸ% but it is also possible to add new functions.
%ğŸ% A {\bf function definition} specifies the name of a new function and
%ğŸ% the sequence of statements that run when the function is called.

ç›®å‰ä¸ºæ­¢ï¼Œæˆ‘ä»¬åªä½¿ç”¨äº† Python è‡ªå¸¦çš„å‡½æ•°ï¼Œ ä½†æ˜¯å¢åŠ æ–°å‡½æ•°ä¹Ÿæ˜¯å¯èƒ½çš„ã€‚
ä¸€ä¸ª {\em å‡½æ•°å®šä¹‰} (function definition) æŒ‡å®šäº†æ–°å‡½æ•°çš„åç§°
ä»¥åŠå½“å‡½æ•°è¢«è°ƒç”¨æ—¶æ‰§è¡Œçš„è¯­å¥åºåˆ—ã€‚
\index{function}  \index{function definition}  \index{definition!function}
\index{å‡½æ•°}  \index{å‡½æ•°å®šä¹‰}  \index{å®šä¹‰!å‡½æ•°}

%ğŸ% Here is an example:

ä¸‹é¢æ˜¯ä¸€ä¸ªç¤ºä¾‹ï¼š


\begin{lstlisting}
def print_lyrics():
    print("I'm a lumberjack, and I'm okay.")
    print("I sleep all night and I work all day.")
\end{lstlisting}

%
%ğŸ% {\tt def} is a keyword that indicates that this is a function
%ğŸ% definition.  The name of the function is \verb"print_lyrics".  The
%ğŸ% rules for function names are the same as for variable names: letters,
%ğŸ% numbers and underscore are legal, but the first character
%ğŸ% can't be a number.  You can't use a keyword as the name of a function,
%ğŸ% and you should avoid having a variable and a function with the same
%ğŸ% name.

\li{def} æ˜¯ä¸€ä¸ªå…³é”®å­—ï¼Œè¡¨æ˜è¿™æ˜¯ä¸€ä¸ªå‡½æ•°å®šä¹‰ã€‚
è¿™ä¸ªå‡½æ•°çš„åå­—æ˜¯ \li{print_lyrics}ã€‚
å‡½æ•°çš„å‘½åè§„åˆ™ä¸å˜é‡åç›¸åŒï¼šå­—æ¯ã€æ•°å­—ä»¥åŠä¸‹åˆ’çº¿æ˜¯åˆæ³•çš„ï¼Œ
ä½†æ˜¯ç¬¬ä¸€ä¸ªå­—ç¬¦ä¸èƒ½æ˜¯æ•°å­—ã€‚ä¸èƒ½ä½¿ç”¨å…³é”®å­—ä½œä¸ºå‡½æ•°åï¼Œå¹¶åº”è¯¥é¿å…
å˜é‡å’Œå‡½æ•°åŒåã€‚
\index{def keyword}  \index{keyword!def}  \index{argument}

%ğŸ% The empty parentheses after the name indicate that this function
%ğŸ% doesn't take any arguments.

å‡½æ•°ååé¢çš„åœ†æ‹¬å·æ˜¯ç©ºçš„ï¼Œè¡¨æ˜è¯¥å‡½æ•°ä¸æ¥å—ä»»ä½•å®å‚ã€‚
\index{parentheses!empty}  \index{header}
\index{body}  \index{indentation}  \index{colon}

%ğŸ% The first line of the function definition is called the {\bf header};
%ğŸ% the rest is called the {\bf body}.  The header has to end with a colon
%ğŸ% and the body has to be indented.  By convention, indentation is
%ğŸ% always four spaces.  The body can contain
%ğŸ% any number of statements.

å‡½æ•°å®šä¹‰çš„ç¬¬ä¸€è¡Œè¢«ç§°ä½œ {\em å‡½æ•°å¤´} (header)ï¼› å…¶ä½™éƒ¨åˆ†è¢«ç§°ä½œ {\em å‡½æ•°ä½“} (body)ã€‚ å‡½æ•°å¤´å¿…é¡»ä»¥å†’å·ç»“å°¾ï¼Œè€Œå‡½æ•°ä½“å¿…é¡»ç¼©è¿›ã€‚ æŒ‰ç…§æƒ¯ä¾‹ï¼Œç¼©è¿›æ€»æ˜¯4ä¸ªç©ºæ ¼ã€‚ å‡½æ•°ä½“èƒ½åŒ…å«ä»»æ„æ¡è¯­å¥ã€‚

%ğŸ% The strings in the print statements are enclosed in double
%ğŸ% quotes.  Single quotes and double quotes do the same thing;
%ğŸ% most people use single quotes except in cases like this where
%ğŸ% a single quote (which is also an apostrophe) appears in the string.

æ‰“å°è¯­å¥ä¸­çš„å­—ç¬¦ä¸²è¢«æ‹¬åœ¨åŒå¼•å·ä¸­ã€‚å•å¼•å·å’ŒåŒå¼•å·çš„ä½œç”¨ç›¸åŒï¼›å¤§å¤šæ•°äººä½¿ç”¨å•å¼•å·ï¼Œä¸Šè¿°ä»£ç ä¸­çš„æƒ…å†µé™¤å¤–ï¼Œå³å•å¼•å·ï¼ˆåŒæ—¶ä¹Ÿæ˜¯æ’‡å·ï¼‰å‡ºç°åœ¨å­—ç¬¦ä¸²ä¸­æ—¶ã€‚

%ğŸ% All quotation marks (single and double)
%ğŸ% must be ``straight quotes'', usually
%ğŸ% located next to Enter on the keyboard.  ``Curly quotes'', like
%ğŸ% the ones in this sentence, are not legal in Python.

æ‰€æœ‰å¼•å·ï¼ˆå•å¼•å·å’ŒåŒå¼•å·ï¼‰å¿…é¡»æ˜¯``{\em ç›´å¼•å·}'' (straight quotes)ï¼Œå®ƒä»¬é€šå¸¸ä½äºé”®ç›˜ä¸Š Enter é”®çš„æ—è¾¹ã€‚åƒè¿™å¥è¯ä¸­ä½¿ç”¨çš„ ``{\em å¼¯å¼•å·}'' (curly quotes)ï¼Œ åœ¨ Python è¯­è¨€ä¸­åˆ™æ˜¯ä¸åˆæ³•çš„ã€‚

%ğŸ% If you type a function definition in interactive mode, the interpreter
%ğŸ% prints dots ({\tt ...}) to let you know that the definition
%ğŸ% isn't complete:

å¦‚æœä½ åœ¨äº¤äº’æ¨¡å¼ä¸‹é”®å…¥å‡½æ•°å®šä¹‰ï¼Œæ¯ç©ºä¸€è¡Œè§£é‡Šå™¨å°±ä¼šæ‰“å°ä¸‰ä¸ªå¥ç‚¹ \li{...}ï¼Œ
è®©ä½ çŸ¥é“å®šä¹‰å¹¶æ²¡æœ‰ç»“æŸã€‚
\index{ellipses}

\begin{lstlisting}
>>> def print_lyrics():
...     print("I'm a lumberjack, and I'm okay.")
...     print("I sleep all night and I work all day.")
...
\end{lstlisting}

%
%ğŸ% To end the function, you have to enter an empty line.

ä¸ºäº†ç»“æŸå‡½æ•°å®šä¹‰ï¼Œä½ å¿…é¡»è¾“å…¥ä¸€ä¸ªç©ºè¡Œã€‚

%ğŸ% Defining a function creates a {\bf function object}, which
%ğŸ% has type \verb"function":

å®šä¹‰ä¸€ä¸ªå‡½æ•°ä¼šåˆ›å»ºä¸€ä¸ª {\em å‡½æ•°å¯¹è±¡} (function object)ï¼Œå…¶ç±»å‹æ˜¯ \li{function}ï¼š
\index{function type}  \index{type!function}
\index{å‡½æ•°ç±»å‹}  \index{ç±»å‹!å‡½æ•°}

\begin{lstlisting}
>>> print(print_lyrics)
<function print_lyrics at 0xb7e99e9c>
>>> type(print_lyrics)
<class 'function'>
\end{lstlisting}

%
%ğŸ% The syntax for calling the new function is the same as
%ğŸ% for built-in functions:

è°ƒç”¨æ–°å‡½æ•°çš„è¯­æ³•ï¼Œå’Œè°ƒç”¨å†…å»ºå‡½æ•°çš„è¯­æ³•ç›¸åŒï¼š

\begin{lstlisting}
>>> print_lyrics()
I'm a lumberjack, and I'm okay.
I sleep all night and I work all day.
\end{lstlisting}

%
%ğŸ% Once you have defined a function, you can use it inside another
%ğŸ% function.  For example, to repeat the previous refrain, we could write
%ğŸ% a function called \verb"repeat_lyrics":

ä¸€æ—¦ä½ å®šä¹‰äº†ä¸€ä¸ªå‡½æ•°ï¼Œä½ å°±å¯ä»¥åœ¨å¦ä¸€ä¸ªå‡½æ•°å†…éƒ¨ä½¿ç”¨å®ƒã€‚
ä¾‹å¦‚ï¼Œä¸ºäº†é‡å¤ä¹‹å‰çš„å å¥ (refrain)ï¼Œæˆ‘ä»¬å¯ä»¥ç¼–å†™ä¸€ä¸ªåå« \li{repeat_lyrics} ï¼š


\begin{lstlisting}
def repeat_lyrics():
    print_lyrics()
    print_lyrics()
\end{lstlisting}

%
%ğŸ% And then call \verb"repeat_lyrics":

ç„¶åè°ƒç”¨ \li{repeat_lyrics}


\begin{lstlisting}
>>> repeat_lyrics()
I'm a lumberjack, and I'm okay.
I sleep all night and I work all day.
I'm a lumberjack, and I'm okay.
I sleep all night and I work all day.
\end{lstlisting}

%
%ğŸ% But that's not really how the song goes.

ä¸è¿‡ï¼Œè¿™é¦–æ­Œçš„æ­Œè¯å®é™…ä¸Šä¸æ˜¯è¿™æ ·çš„ã€‚


%
%%
% \section{Definitions and uses  |  å®šä¹‰å’Œä½¿ç”¨}
\section{å®šä¹‰å’Œä½¿ç”¨}
\index{function definition}
\index{å‡½æ•°å®šä¹‰}

%ğŸ% Pulling together the code fragments from the previous section, the
%ğŸ% whole program looks like this:

å°†ä¸Šä¸€èŠ‚çš„å¤šä¸ªä»£ç æ®µç»„åˆåœ¨ä¸€èµ·ï¼Œæ•´ä¸ªç¨‹åºçœ‹èµ·æ¥æ˜¯è¿™æ ·çš„ï¼š

\begin{lstlisting}
def print_lyrics():
    print("I'm a lumberjack, and I'm okay.")
    print("I sleep all night and I work all day.")

def repeat_lyrics():
    print_lyrics()
    print_lyrics()

repeat_lyrics()
\end{lstlisting}

%
%ğŸ% This program contains two function definitions: \verb"print_lyrics" and
%ğŸ% \verb"repeat_lyrics".  Function definitions get executed just like other
%ğŸ% statements, but the effect is to create function objects.  The statements
%ğŸ% inside the function do not run until the function is called, and
%ğŸ% the function definition generates no output.

è¯¥ç¨‹åºåŒ…å«ä¸¤ä¸ªå‡½æ•°å®šä¹‰ï¼š\li{print_lyrics} å’Œ \li{repeat_lyrics}ã€‚
å‡½æ•°å®šä¹‰å’Œå…¶å®ƒè¯­å¥ä¸€æ ·ï¼Œéƒ½ä¼šè¢«æ‰§è¡Œï¼Œä½†æ˜¯å…¶ä½œç”¨æ˜¯åˆ›å»ºå‡½æ•°å¯¹è±¡ã€‚
å‡½æ•°å†…éƒ¨çš„è¯­å¥åœ¨å‡½æ•°è¢«è°ƒç”¨ä¹‹å‰ï¼Œæ˜¯ä¸ä¼šæ‰§è¡Œçš„ï¼Œè€Œä¸”å‡½æ•°å®šä¹‰ä¸ä¼šäº§ç”Ÿä»»ä½•è¾“å‡ºã€‚

\index{use before def}

%ğŸ% As you might expect, you have to create a function before you can
%ğŸ% run it.  In other words, the function definition has to run
%ğŸ% before the function gets called.

ä½ å¯èƒ½çŒœåˆ°äº†ï¼Œåœ¨è¿è¡Œå‡½æ•°ä¹‹å‰ï¼Œä½ å¿…é¡»å…ˆåˆ›å»ºè¿™ä¸ªå‡½æ•°ã€‚æ¢å¥è¯è¯´ï¼Œå‡½æ•°å®šä¹‰å¿…é¡»åœ¨å…¶ç¬¬ä¸€æ¬¡è¢«è°ƒç”¨ä¹‹å‰æ‰§è¡Œã€‚

%ğŸ% As an exercise, move the last line of this program
%ğŸ% to the top, so the function call appears before the definitions. Run
%ğŸ% the program and see what error
%ğŸ% message you get.

æˆ‘ä»¬åšä¸ªå°ç»ƒä¹ ï¼Œå°†ç¨‹åºçš„æœ€åä¸€è¡Œç§»åˆ°é¡¶éƒ¨ï¼Œä½¿å¾—å‡½æ•°è°ƒç”¨å‡ºç°åœ¨å‡½æ•°å®šä¹‰ä¹‹å‰ã€‚è¿è¡Œç¨‹åºï¼Œçœ‹çœ‹ä¼šå¾—åˆ°æ€æ ·çš„é”™è¯¯ä¿¡æ¯ã€‚


%ğŸ% Now move the function call back to the bottom
%ğŸ% and move the definition of \verb"print_lyrics" after the definition of
%ğŸ% \verb"repeat_lyrics".  What happens when you run this program?

ç°åœ¨å°†å‡½æ•°è°ƒç”¨ç§»å›åº•éƒ¨ï¼Œç„¶åå°† \li{print_lyrics} çš„å®šä¹‰ç§»åˆ° \li{repeat_lyrics} çš„å®šä¹‰ä¹‹åã€‚è¿™æ¬¡è¿è¡Œç¨‹åºæ—¶ä¼šå‘ç”Ÿä»€ä¹ˆï¼Ÿ


%
%%
% \section{Flow of execution  |  æ‰§è¡Œæµç¨‹}
\section{æ‰§è¡Œæµç¨‹}
\index{flow of execution}  \index{æ‰§è¡Œæµç¨‹}

%ğŸ% To ensure that a function is defined before its first use,
%ğŸ% you have to know the order statements run in, which is
%ğŸ% called the {\bf flow of execution}.

ä¸ºäº†ä¿è¯å‡½æ•°ç¬¬ä¸€æ¬¡ä½¿ç”¨ä¹‹å‰å·²ç»è¢«å®šä¹‰ï¼Œä½ å¿…é¡»è¦äº†è§£è¯­å¥æ‰§è¡Œçš„é¡ºåºï¼Œ
è¿™ä¹Ÿè¢«ç§°ä½œ {\em æ‰§è¡Œæµç¨‹} (flow of execution) ã€‚

%ğŸ% Execution always begins at the first statement of the program.
%ğŸ% Statements are run one at a time, in order from top to bottom.

æ‰§è¡Œæµç¨‹æ€»æ˜¯ä»ç¨‹åºçš„ç¬¬ä¸€æ¡è¯­å¥å¼€å§‹ï¼Œè‡ªé¡¶å‘ä¸‹ï¼Œæ¯æ¬¡æ‰§è¡Œä¸€æ¡è¯­å¥ã€‚

%ğŸ% Function definitions do not alter the flow of execution of the
%ğŸ% program, but remember that statements inside the function don't
%ğŸ% run until the function is called.

å‡½æ•°å®šä¹‰ä¸æ”¹å˜ç¨‹åºæ‰§è¡Œçš„æµç¨‹ï¼Œä½†æ˜¯è¯·è®°ä½ï¼Œå‡½æ•°ä¸è¢«è°ƒç”¨çš„è¯ï¼Œå‡½æ•°å†…éƒ¨çš„è¯­å¥æ˜¯ä¸ä¼šæ‰§è¡Œçš„ã€‚

%ğŸ% A function call is like a detour in the flow of execution. Instead of
%ğŸ% going to the next statement, the flow jumps to the body of
%ğŸ% the function, runs the statements there, and then comes back
%ğŸ% to pick up where it left off.

å‡½æ•°è°ƒç”¨åƒæ˜¯åœ¨æ‰§è¡Œæµç¨‹ä¸Šç»•äº†ä¸€ä¸ªå¼¯è·¯ã€‚
æ‰§è¡Œæµç¨‹æ²¡æœ‰è¿›å…¥ä¸‹ä¸€æ¡è¯­å¥ï¼Œè€Œæ˜¯è·³å…¥äº†å‡½æ•°ä½“ï¼Œå¼€å§‹æ‰§è¡Œé‚£é‡Œçš„è¯­å¥ï¼Œç„¶åå†å›åˆ°å®ƒç¦»å¼€çš„ä½ç½®ã€‚

%ğŸ% That sounds simple enough, until you remember that one function can
%ğŸ% call another.  While in the middle of one function, the program might
%ğŸ% have to run the statements in another function.  Then, while
%ğŸ% running that new function, the program might have to run yet
%ğŸ% another function!

è¿™å¬èµ·æ¥è¶³å¤Ÿç®€å•ï¼Œè‡³å°‘åœ¨ä½ æƒ³èµ·ä¸€ä¸ªå‡½æ•°å¯ä»¥è°ƒç”¨å¦ä¸€ä¸ªå‡½æ•°ä¹‹å‰ã€‚
å½“ä¸€ä¸ªå‡½æ•°æ‰§è¡Œåˆ°ä¸­é—´çš„æ—¶å€™ï¼Œç¨‹åºå¯èƒ½å¿…é¡»æ‰§è¡Œå¦ä¸€ä¸ªå‡½æ•°é‡Œçš„è¯­å¥ã€‚
ç„¶ååœ¨æ‰§è¡Œé‚£ä¸ªæ–°å‡½æ•°çš„æ—¶å€™ï¼Œç¨‹åºå¯èƒ½åˆå¾—æ‰§è¡Œå¦å¤–ä¸€ä¸ªå‡½æ•°ï¼

%ğŸ% Fortunately, Python is good at keeping track of where it is, so each
%ğŸ% time a function completes, the program picks up where it left off in
%ğŸ% the function that called it.  When it gets to the end of the program,
%ğŸ% it terminates.

å¹¸è¿çš„æ˜¯ï¼ŒPythonå–„äºè®°å½•ç¨‹åºæ‰§è¡Œæµç¨‹çš„ä½ç½®ï¼Œå› æ­¤æ¯æ¬¡ä¸€ä¸ªå‡½æ•°æ‰§è¡Œå®Œæˆæ—¶ï¼Œ
ç¨‹åºä¼šå›åˆ°è°ƒç”¨å®ƒçš„é‚£ä¸ªå‡½æ•°åŸæ¥æ‰§è¡Œçš„ä½ç½®ã€‚å½“åˆ°è¾¾ç¨‹åºçš„ç»“å°¾æ—¶ï¼Œç¨‹åºæ‰ä¼šç»ˆæ­¢ã€‚

%ğŸ% In summary, when you read a program, you
%ğŸ% don't always want to read from top to bottom.  Sometimes it makes
%ğŸ% more sense if you follow the flow of execution.

æ€»ä¹‹ï¼Œé˜…è¯»ç¨‹åºæ—¶ï¼Œä½ æ²¡æœ‰å¿…è¦æ€»æ˜¯ä»ä¸Šå¾€ä¸‹è¯»ã€‚æœ‰æ—¶å€™ï¼Œè·Ÿç€æ‰§è¡Œæµç¨‹é˜…è¯»åè€Œæ›´åŠ åˆç†ã€‚


%
%%
% \section{Parameters and arguments  |  å½¢å‚å’Œå®å‚}
\section{å½¢å‚å’Œå®å‚}
\label{parameters}
\index{parameter}  \index{function parameter}
\index{argument}  \index{function argument}

%ğŸ% Some of the functions we have seen require arguments.  For
%ğŸ% example, when you call {\tt math.sin} you pass a number
%ğŸ% as an argument.  Some functions take more than one argument:
%ğŸ% {\tt math.pow} takes two, the base and the exponent.

æˆ‘ä»¬ä¹‹å‰æ¥è§¦çš„ä¸€äº›å‡½æ•°éœ€è¦å®å‚ã€‚ä¾‹å¦‚ï¼Œå½“ä½ è°ƒç”¨ \li{math.sin} æ—¶ï¼Œä½ ä¼ é€’ä¸€ä¸ªæ•°å­—ä½œä¸ºå®å‚ã€‚
æœ‰äº›å‡½æ•°æ¥å—ä¸€ä¸ªä»¥ä¸Šçš„å®å‚ï¼š \li{math.pow} æ¥å—ä¸¤ä¸ªï¼Œåº•æ•°å’ŒæŒ‡æ•°ã€‚

%ğŸ% Inside the function, the arguments are assigned to
%ğŸ% variables called {\bf parameters}.  Here is a definition for
%ğŸ% a function that takes an argument:
%ğŸ% \index{parentheses!parameters in}

åœ¨å‡½æ•°å†…éƒ¨ï¼Œå®å‚è¢«èµ‹ç»™ç§°ä½œ {\em å½¢å‚} (parameters) çš„å˜é‡ã€‚
ä¸‹é¢çš„ä»£ç å®šä¹‰äº†ä¸€ä¸ªæ¥å—ä¸€ä¸ªå®å‚çš„å‡½æ•°ï¼š

\index{parentheses!parameters in}

\begin{lstlisting}
def print_twice(bruce):
    print(bruce)
    print(bruce)
\end{lstlisting}

%
%ğŸ% This function assigns the argument to a parameter
%ğŸ% named {\tt bruce}.  When the function is called, it prints the value of
%ğŸ% the parameter (whatever it is) twice.

è¿™ä¸ªå‡½æ•°å°†å®å‚èµ‹ç»™åä¸º \li{bruce} çš„å½¢å‚ã€‚å½“å‡½æ•°è¢«è°ƒç”¨çš„æ—¶å€™ï¼Œå®ƒä¼šæ‰“å°å½¢å‚ï¼ˆæ— è®ºå®ƒæ˜¯ä»€ä¹ˆï¼‰çš„å€¼ä¸¤æ¬¡ã€‚

%ğŸ% This function works with any value that can be printed.

è¯¥å‡½æ•°å¯¹ä»»æ„èƒ½è¢«æ‰“å°çš„å€¼éƒ½æœ‰æ•ˆã€‚

\begin{lstlisting}
>>> print_twice('Spam')
Spam
Spam
>>> print_twice(42)
42
42
>>> print_twice(math.pi)
3.14159265359
3.14159265359
\end{lstlisting}

%
%ğŸ% The same rules of composition that apply to built-in functions also
%ğŸ% apply to programmer-defined functions, so we can use any kind of expression
%ğŸ% as an argument for \verb"print_twice":

ç»„åˆè§„åˆ™ä¸ä»…é€‚ç”¨äºå†…å»ºå‡½æ•°ï¼Œè€Œä¸”ä¹Ÿé€‚ç”¨äºå¼€å‘è€…è‡ªå®šä¹‰çš„å‡½æ•° (programmer-defined functions)ï¼Œ å› æ­¤æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ä»»æ„ç±»å‹çš„è¡¨è¾¾å¼ä½œä¸º \li{print_twice} çš„å®å‚ï¼š

\index{composition}  \index{programmer-defined function}
\index{function!programmer defined}

\begin{lstlisting}
>>> print_twice('Spam '*4)
Spam Spam Spam Spam
Spam Spam Spam Spam
>>> print_twice(math.cos(math.pi))
-1.0
-1.0
\end{lstlisting}

%
%ğŸ% The argument is evaluated before the function is called, so
%ğŸ% in the examples the expressions \verb"'Spam '*4" and
%ğŸ% {\tt math.cos(math.pi)} are only evaluated once.

åœ¨å‡½æ•°è¢«è°ƒç”¨ä¹‹å‰ï¼Œ å®å‚ä¼šå…ˆè¿›è¡Œè®¡ç®—ï¼Œ å› æ­¤åœ¨è¿™äº›ä¾‹å­ä¸­ï¼Œ 
è¡¨è¾¾å¼ \li{Spam '*4} å’Œ \li{math.cos(math.pi)} éƒ½åªè¢«è®¡ç®—äº†ä¸€æ¬¡ã€‚

\index{argument}
\index{å®å‚}

%ğŸ% You can also use a variable as an argument:

ä½ ä¹Ÿå¯ä»¥ç”¨å˜é‡ä½œä¸ºå®å‚ï¼š

\begin{lstlisting}
>>> michael = 'Eric, the half a bee.'
>>> print_twice(michael)
Eric, the half a bee.
Eric, the half a bee.
\end{lstlisting}

%
%ğŸ% The name of the variable we pass as an argument ({\tt michael}) has
%ğŸ% nothing to do with the name of the parameter ({\tt bruce}).  It
%ğŸ% doesn't matter what the value was called back home (in the caller);
%ğŸ% here in \verb"print_twice", we call everybody {\tt bruce}.

æˆ‘ä»¬ä¼ é€’çš„å®å‚å \li{michael} ä¸å½¢å‚çš„åå­— \li{bruce} æ²¡æœ‰ä»»ä½•å…³ç³»ã€‚ è¿™ä¸ªå€¼åœ¨ä¼ å…¥å‡½æ•°ä¹‹å‰å«ä»€ä¹ˆéƒ½æ²¡æœ‰å…³ç³»ï¼›åªè¦ä¼ å…¥äº† \li{print_twice} å‡½æ•°ï¼Œæˆ‘ä»¬å°†æ‰€æœ‰äººéƒ½ç§°ä¸º \li{bruce}ã€‚


%
%%
% \section{Variables and parameters are local  |  å˜é‡å’Œå½¢å‚éƒ½æ˜¯å±€éƒ¨çš„}
\section{å˜é‡å’Œå½¢å‚éƒ½æ˜¯å±€éƒ¨çš„}
\index{local variable}  \index{variable!local}
\index{å±€éƒ¨å˜é‡}  \index{å˜é‡!å±€éƒ¨å˜é‡}

%ğŸ% When you create a variable inside a function, it is {\bf local},
%ğŸ% which means that it only
%ğŸ% exists inside the function.  For example:

å½“ä½ åœ¨å‡½æ•°é‡Œé¢åˆ›å»ºå˜é‡æ—¶ï¼Œè¿™ä¸ªå˜é‡æ˜¯ {\em å±€éƒ¨}çš„ (local)ï¼Œ
ä¹Ÿå°±æ˜¯è¯´å®ƒåªåœ¨å‡½æ•°å†…éƒ¨å­˜åœ¨ã€‚ ä¾‹å¦‚ï¼š
\index{parentheses!parameters in}

\begin{lstlisting}
def cat_twice(part1, part2):
    cat = part1 + part2
    print_twice(cat)
\end{lstlisting}

%
%ğŸ% This function takes two arguments, concatenates them, and prints
%ğŸ% the result twice.  Here is an example that uses it:

è¯¥å‡½æ•°æ¥å—ä¸¤ä¸ªå®å‚ï¼Œæ‹¼æ¥ (concatenates) å®ƒä»¬å¹¶æ‰“å°ç»“æœä¸¤æ¬¡ã€‚ ä¸‹é¢æ˜¯ä½¿ç”¨è¯¥å‡½æ•°çš„ä¸€ä¸ªç¤ºä¾‹ï¼š
\index{concatenation}

\begin{lstlisting}
>>> line1 = 'Bing tiddle '
>>> line2 = 'tiddle bang.'
>>> cat_twice(line1, line2)
Bing tiddle tiddle bang.
Bing tiddle tiddle bang.
\end{lstlisting}

%
%ğŸ% When \verb"cat_twice" terminates, the variable {\tt cat}
%ğŸ% is destroyed.  If we try to print it, we get an exception:
%ğŸ% \index{NameError}  \index{exception!NameError}

å½“ \li{cat_twice} ç»“æŸæ—¶ï¼Œå˜é‡ \li{cat} è¢«é”€æ¯äº†ã€‚
å¦‚æœæˆ‘ä»¬è¯•å›¾æ‰“å°å®ƒï¼Œæˆ‘ä»¬å°†è·å¾—ä¸€ä¸ªå¼‚å¸¸ï¼š
\index{NameError}  \index{exception!NameError}

\begin{lstlisting}
>>> print(cat)
NameError: name 'cat' is not defined
\end{lstlisting}

%
%ğŸ% Parameters are also local.
%ğŸ% For example, outside \verb"print_twice", there is no
%ğŸ% such thing as {\tt bruce}.

å½¢å‚ä¹Ÿéƒ½æ˜¯å±€éƒ¨çš„ã€‚ä¾‹å¦‚ï¼Œåœ¨ \li{print_twice} å‡½æ•°çš„å¤–éƒ¨å¹¶æ²¡æœ‰ \li{bruce} è¿™ä¸ªå˜é‡ã€‚
\index{parameter}
\index{å½¢å‚}


%
%%
% \section{Stack diagrams  |  å †æ ˆå›¾}
\section{å †æ ˆå›¾}
\label{stackdiagram}

\index{stack diagram}  \index{function frame}  \index{frame}
\index{å †æ ˆå›¾}

%ğŸ% To keep track of which variables can be used where, it is sometimes
%ğŸ% useful to draw a {\bf stack diagram}.  Like state diagrams, stack
%ğŸ% diagrams show the value of each variable, but they also show the
%ğŸ% function each variable belongs to.

æœ‰æ—¶ï¼Œ ç”»ä¸€ä¸ª {\em å †æ ˆå›¾} (stack diagram) å¯ä»¥å¸®åŠ©ä½ è·Ÿè¸ªå“ªä¸ªå˜é‡èƒ½åœ¨å“ªå„¿ç”¨ã€‚  
ä¸çŠ¶æ€å›¾ç±»ä¼¼ï¼Œ å †æ ˆå›¾è¦è¯´æ˜æ¯ä¸ªå˜é‡çš„å€¼ï¼Œ ä½†æ˜¯å®ƒä»¬ä¹Ÿè¦è¯´æ˜æ¯ä¸ªå˜é‡æ‰€å±çš„å‡½æ•°ã€‚  
\index{stack diagram}  \index{diagram!stack}

%ğŸ% Each function is represented by a {\bf frame}.  A frame is a box with
%ğŸ% the name of a function beside it and the parameters and variables of
%ğŸ% the function inside it.  The stack diagram for the previous example is
%ğŸ% shown in Figure~\ref{fig.stack}.

æ¯ä¸ªå‡½æ•°ç”¨ä¸€ä¸ª {\em æ ˆå¸§} (frame) è¡¨ç¤ºã€‚
ä¸€ä¸ªæ ˆå¸§å°±æ˜¯ä¸€ä¸ªçº¿æ¡†ï¼Œå‡½æ•°ååœ¨æ—è¾¹ï¼Œå½¢å‚ä»¥åŠå‡½æ•°å†…éƒ¨çš„å˜é‡åˆ™åœ¨é‡Œé¢ã€‚
å‰é¢ä¾‹å­çš„å †æ ˆå›¾å¦‚å›¾~\ref{fig.stack}æ‰€ç¤ºã€‚

\begin{figure}
\centerline
{\includegraphics[scale=0.8]{../source/figs/stack.pdf}}
%ğŸ% \caption{Stack diagram.}
\caption{å †æ ˆå›¾ã€‚}
\label{fig.stack}
\end{figure}

%ğŸ% The frames are arranged in a stack that indicates which function
%ğŸ% called which, and so on.  In this example, \verb"print_twice"
%ğŸ% was called by \verb"cat_twice", and \verb"cat_twice" was called by
%ğŸ% \verb"__main__", which is a special name for the topmost frame.  When
%ğŸ% you create a variable outside of any function, it belongs to
%ğŸ% \verb"__main__".

è¿™äº›çº¿æ¡†æ’åˆ—æˆæ ˆçš„å½¢å¼ï¼Œè¯´æ˜äº†å“ªä¸ªå‡½æ•°è°ƒç”¨äº†å“ªä¸ªå‡½æ•°ç­‰ä¿¡æ¯ã€‚
åœ¨æ­¤ä¾‹ä¸­ï¼Œ\li{print_twice} è¢« \li{cat_twice} è°ƒç”¨ï¼Œ
\li{cat_twice} åˆè¢« \li{__main__} è°ƒç”¨ï¼Œ \li{__main__} æ˜¯ä¸€ä¸ªè¡¨ç¤ºæœ€ä¸Šå±‚æ ˆå¸§çš„ç‰¹æ®Šåå­—ã€‚
å½“ä½ åœ¨æ‰€æœ‰å‡½æ•°ä¹‹å¤–åˆ›å»ºä¸€ä¸ªå˜é‡æ—¶ï¼Œå®ƒå°±å±äº \li{__main__}ã€‚

%ğŸ% Each parameter refers to the same value as its corresponding
%ğŸ% argument.  So, {\tt part1} has the same value as
%ğŸ% {\tt line1}, {\tt part2} has the same value as {\tt line2},
%ğŸ% and {\tt bruce} has the same value as {\tt cat}.

æ¯ä¸ªå½¢å‚éƒ½æŒ‡å‘å…¶å¯¹åº”å®å‚çš„å€¼ã€‚
å› æ­¤ï¼Œ\li{part1} å’Œ \li{line1} çš„å€¼ç›¸åŒï¼Œ \li{part2} å’Œ \li{line2} çš„å€¼ç›¸åŒï¼Œ \li{bruce} å’Œ \li{cat} çš„å€¼ç›¸åŒã€‚

%ğŸ% If an error occurs during a function call, Python prints the
%ğŸ% name of the function, the name of the function that called
%ğŸ% it, and the name of the function that called {\em that}, all the
%ğŸ% way back to \verb"__main__".

å¦‚æœå‡½æ•°è°ƒç”¨æ—¶å‘ç”Ÿé”™è¯¯ï¼ŒPython ä¼šæ‰“å°å‡ºé”™å‡½æ•°çš„åå­—ä»¥åŠè°ƒç”¨å®ƒçš„å‡½æ•°çš„åå­—ï¼Œ
ä»¥åŠè°ƒç”¨ åé¢{\bf è¿™ä¸ªå‡½æ•°} çš„åå­—ï¼Œä¸€ç›´è¿½æº¯åˆ° \li{__main__} ä¸ºæ­¢ã€‚

%ğŸ% For example, if you try to access {\tt cat} from within
%ğŸ% \verb"print_twice", you get a {\tt NameError}:

ä¾‹å¦‚ï¼Œå¦‚æœä½ è¯•å›¾åœ¨ \li{print_twice} é‡Œé¢è®¿é—® \li{cat} ï¼Œ
ä½ å°†è·å¾—ä¸€ä¸ª \li{NameError} ï¼š

%ğŸ% \begin{lstlisting}
%ğŸ% Traceback (innermost last):
%ğŸ%   File "test.py", line 13, in __main__
%ğŸ%     cat_twice(line1, line2)
%ğŸ%   File "test.py", line 5, in cat_twice
%ğŸ%     print_twice(cat)
%ğŸ%   File "test.py", line 9, in print_twice
%ğŸ%     print(cat)
%ğŸ% NameError: name 'cat' is not defined
%ğŸ% \end{lstlisting}
%ğŸ%

%ğŸ% This list of functions is called a {\bf traceback}.  It tells you what
%ğŸ% program file the error occurred in, and what line, and what functions
%ğŸ% were executing at the time.  It also shows the line of code that
%ğŸ% caused the error.

è¿™ä¸ªå‡½æ•°åˆ—è¡¨è¢«ç§°ä½œ {\em å›æº¯} (traceback) ã€‚
å®ƒå‘Šè¯‰ä½ å‘ç”Ÿé”™è¯¯çš„æ˜¯å“ªä¸ªç¨‹åºæ–‡ä»¶ï¼Œé”™è¯¯åœ¨å“ªä¸€è¡Œï¼Œä»¥åŠå½“æ—¶åœ¨æ‰§è¡Œå“ªä¸ªå‡½æ•°ã€‚
å®ƒè¿˜ä¼šæ˜¾ç¤ºå¼•èµ·é”™è¯¯çš„é‚£ä¸€è¡Œä»£ç ã€‚
\index{traceback}

%ğŸ% The order of the functions in the traceback is the same as the
%ğŸ% order of the frames in the stack diagram.  The function that is
%ğŸ% currently running is at the bottom.

å›æº¯ä¸­çš„å‡½æ•°é¡ºåºï¼Œä¸å †æ ˆå›¾ä¸­çš„å‡½æ•°é¡ºåºä¸€è‡´ã€‚å‡ºé”™æ—¶æ­£åœ¨è¿è¡Œçš„é‚£ä¸ªå‡½æ•°åˆ™ä½äºå›æº¯ä¿¡æ¯çš„åº•éƒ¨ã€‚


%
%%
% \section{Fruitful functions and void functions  |  æœ‰è¿”å›å€¼å‡½æ•°å’Œæ— è¿”å›å€¼å‡½æ•°}
\section{æœ‰è¿”å›å€¼å‡½æ•°å’Œæ— è¿”å›å€¼å‡½æ•°}
\index{fruitful function}  \index{void function}
\index{function, fruitful}  \index{function, void}
\index{æœ‰è¿”å›å€¼å‡½æ•°}  \index{æ— è¿”å›å€¼å‡½æ•°}
\index{å‡½æ•°function, æœ‰è¿”å›å€¼}  \index{å‡½æ•°, æ— è¿”å›å€¼}


%ğŸ% Some of the functions we have used, such as the math functions, return
%ğŸ% results; for lack of a better name, I call them {\bf fruitful
%ğŸ%   functions}.  Other functions, like \verb"print_twice", perform an
%ğŸ% action but don't return a value.  They are called {\bf void
%ğŸ%   functions}.

æœ‰ä¸€äº›æˆ‘ä»¬ä¹‹å‰ç”¨è¿‡çš„å‡½æ•°ï¼Œä¾‹å¦‚æ•°å­¦å‡½æ•°ï¼Œä¼šè¿”å›ç»“æœï¼›
ç”±äºæ²¡æœ‰æ›´å¥½çš„åå­—ï¼Œæˆ‘å§‘ä¸”å«å®ƒä»¬ {\em æœ‰è¿”å›å€¼å‡½æ•°} (fruitful functions) ã€‚
å…¶å®ƒçš„å‡½æ•°ï¼Œåƒ \li{print_twice} ï¼Œæ‰§è¡Œä¸€ä¸ªåŠ¨ä½œä½†æ˜¯ä¸è¿”å›ä»»ä½•å€¼ã€‚
æˆ‘ç§°å®ƒä»¬ä¸º {\em æ— è¿”å›å€¼å‡½æ•°} (void functions) ã€‚

%ğŸ% When you call a fruitful function, you almost always
%ğŸ% want to do something with the result; for example, you might
%ğŸ% assign it to a variable or use it as part of an expression:

å½“ä½ è°ƒç”¨ä¸€ä¸ªæœ‰è¿”å›å€¼å‡½æ•°æ—¶ï¼Œä½ å‡ ä¹æ€»æ˜¯æƒ³ç”¨è¿”å›çš„ç»“æœå»åšäº›ä»€ä¹ˆï¼›
ä¾‹å¦‚ï¼Œä½ å¯èƒ½å°†å®ƒèµ‹å€¼ç»™ä¸€ä¸ªå˜é‡ï¼Œæˆ–è€…æŠŠå®ƒç”¨åœ¨è¡¨è¾¾å¼é‡Œï¼š

\begin{lstlisting}
x = math.cos(radians)
golden = (math.sqrt(5) + 1) / 2
\end{lstlisting}

%
%ğŸ% When you call a function in interactive mode, Python displays
%ğŸ% the result:

å½“ä½ åœ¨äº¤äº’æ¨¡å¼ä¸‹è°ƒç”¨ä¸€ä¸ªå‡½æ•°æ—¶ï¼ŒPythonè§£é‡Šå™¨ä¼šé©¬ä¸Šæ˜¾ç¤ºç»“æœï¼š

\begin{lstlisting}
>>> math.sqrt(5)
2.2360679774997898
\end{lstlisting}

%
%ğŸ% But in a script, if you call a fruitful function all by itself,
%ğŸ% the return value is lost forever!

ä½†æ˜¯åœ¨è„šæœ¬ä¸­ï¼Œå¦‚æœä½ å•å•è°ƒç”¨ä¸€ä¸ªæœ‰è¿”å›å€¼å‡½æ•°ï¼Œ è¿”å›å€¼å°±æ°¸è¿œä¸¢å¤±äº†ï¼

\begin{lstlisting}
math.sqrt(5)
\end{lstlisting}

%
%ğŸ% This script computes the square root of 5, but since it doesn't store
%ğŸ% or display the result, it is not very useful.

è¯¥è„šæœ¬è®¡ç®—5çš„å¹³æ–¹æ ¹ï¼Œä½†æ˜¯å› ä¸ºå®ƒæ²¡ä¿å­˜æˆ–è€…æ˜¾ç¤ºè¿™ä¸ªç»“æœï¼Œ
è¿™ä¸ªè„šæœ¬å¹¶æ²¡å¤šå¤§ç”¨å¤„ã€‚
\index{interactive mode}  \index{script mode}

%ğŸ% Void functions might display something on the screen or have some
%ğŸ% other effect, but they don't have a return value.  If you
%ğŸ% assign the result to a variable, you get a special value called
%ğŸ% {\tt None}.

æ— è¿”å›å€¼å‡½æ•°å¯èƒ½åœ¨å±å¹•ä¸Šæ‰“å°è¾“å‡ºç»“æœï¼Œæˆ–è€…äº§ç”Ÿå…¶å®ƒçš„å½±å“ï¼Œ
ä½†æ˜¯å®ƒä»¬å¹¶æ²¡æœ‰è¿”å›å€¼ã€‚å¦‚æœä½ è¯•å›¾å°†æ— è¿”å›å€¼å‡½æ•°çš„ç»“æœèµ‹ç»™ä¸€ä¸ªå˜é‡ï¼Œ
ä½ ä¼šå¾—åˆ°ä¸€ä¸ªè¢«ç§°ä½œ \li{None} çš„ç‰¹æ®Šå€¼ã€‚
\index{None special value}  \index{special value!None}

\begin{lstlisting}
>>> result = print_twice('Bing')
Bing
Bing
>>> print(result)
None
\end{lstlisting}

%
%ğŸ% The value {\tt None} is not the same as the string \verb"'None'".
%ğŸ% It is a special value that has its own type:

\li{None} è¿™ä¸ªå€¼å’Œå­—ç¬¦ä¸² \li{'None'} ä¸åŒã€‚ è¿™æ˜¯ä¸€ä¸ªå…·æœ‰ç‹¬ç«‹ç±»å‹çš„ç‰¹æ®Šå€¼ï¼š

\begin{lstlisting}
>>> print(type(None))
<class 'NoneType'>
\end{lstlisting}

%
%ğŸ% The functions we have written so far are all void.  We will start
%ğŸ% writing fruitful functions in a few chapters.

ç›®å‰ä¸ºæ­¢ï¼Œæˆ‘ä»¬å†™çš„å‡½æ•°éƒ½æ˜¯æ— è¿”å›å€¼å‡½æ•°ã€‚
æˆ‘ä»¬å°†åœ¨å‡ ç« ä¹‹åå¼€å§‹ç¼–å†™æœ‰è¿”å›å€¼å‡½æ•°ã€‚
\index{NoneType type}  \index{type!NoneType}


%
%%
% \section{Why functions?  |  ä¸ºä»€ä¹ˆä½¿ç”¨å‡½æ•°ï¼Ÿ}
\section{ä¸ºä»€ä¹ˆä½¿ç”¨å‡½æ•°ï¼Ÿ}
\index{function, reasons for}

%ğŸ% It may not be clear why it is worth the trouble to divide
%ğŸ% a program into functions.  There are several reasons:

%ğŸ% \begin{itemize}
%ğŸ%
%ğŸ% \item Creating a new function gives you an opportunity to name a group
%ğŸ% of statements, which makes your program easier to read and debug.
%ğŸ%
%ğŸ% \item Functions can make a program smaller by eliminating repetitive
%ğŸ% code.  Later, if you make a change, you only have
%ğŸ% to make it in one place.
%ğŸ%
%ğŸ% \item Dividing a long program into functions allows you to debug the
%ğŸ% parts one at a time and then assemble them into a working whole.
%ğŸ%
%ğŸ% \item Well-designed functions are often useful for many programs.
%ğŸ% Once you write and debug one, you can reuse it.
%ğŸ%
%ğŸ% \end{itemize}

ä½ å¯èƒ½è¿˜ä¸æ˜ç™½ä¸ºä»€ä¹ˆå€¼å¾—å°†ä¸€ä¸ªç¨‹åºåˆ†è§£æˆå¤šä¸ªå‡½æ•°ã€‚ åŸå› åŒ…æ‹¬ä»¥ä¸‹å‡ ç‚¹ï¼š

\begin{itemize}

\item åˆ›å»ºä¸€ä¸ªæ–°çš„å‡½æ•°å¯ä»¥è®©ä½ ç»™ä¸€ç»„è¯­å¥å‘½åï¼Œè¿™å¯ä»¥è®©ä½ çš„ç¨‹åºæ›´å®¹æ˜“é˜…è¯»å’Œè°ƒè¯•ã€‚

\item é€šè¿‡æ¶ˆé™¤é‡å¤çš„ä»£ç ï¼Œå‡½æ•°ç²¾ç®€äº†ç¨‹åºã€‚ ä»¥åï¼Œå¦‚æœä½ è¦åšä¸ªå˜åŠ¨ï¼Œä½ åªéœ€åœ¨ä¸€å¤„ä¿®æ”¹å³å¯ã€‚

\item å°†ä¸€ä¸ªé•¿ç¨‹åºåˆ†è§£ä¸ºå¤šä¸ªå‡½æ•°ï¼Œå¯ä»¥è®©ä½ ä¸€æ¬¡è°ƒè¯•ä¸€éƒ¨åˆ†ï¼Œç„¶åå†å°†å®ƒä»¬ç»„åˆä¸ºä¸€ä¸ªå¯è¡Œçš„æ•´ä½“ã€‚

\item è®¾è®¡è‰¯å¥½çš„å‡½æ•°ç»å¸¸å¯¹å¤šä¸ªç¨‹åºéƒ½æœ‰å¸®åŠ©ã€‚ä¸€æ—¦ä½ å†™å‡ºå¹¶è°ƒè¯•å¥½ä¸€ä¸ªå‡½æ•°ï¼Œä½ å°±å¯ä»¥é‡å¤ä½¿ç”¨å®ƒã€‚

\end{itemize}


%
%%
% \section{Debugging  |  è°ƒè¯•}
\section{è°ƒè¯•}
\index{debug]}  \index{è°ƒè¯•}

%ğŸ% One of the most important skills you will acquire is debugging.
%ğŸ% Although it can be frustrating, debugging is one of the most
%ğŸ% intellectually rich, challenging, and interesting parts of
%ğŸ% programming.

è°ƒè¯•ï¼Œæ˜¯ä½ èƒ½è·å¾—çš„æœ€é‡è¦çš„æŠ€èƒ½ä¹‹ä¸€ã€‚
è™½ç„¶è°ƒè¯•ä¼šè®©äººæ²®ä¸§ï¼Œä½†å´æ˜¯ç¼–ç¨‹è¿‡ç¨‹ä¸­æœ€å¯Œå«æ™ºæ…§ã€æŒ‘æˆ˜ä»¥åŠä¹è¶£çš„ä¸€éƒ¨åˆ†ã€‚
\index{experimental debugging}  \index{debugging!experimental}

%ğŸ% In some ways debugging is like detective work.  You are confronted
%ğŸ% with clues and you have to infer the processes and events that led
%ğŸ% to the results you see.

åœ¨æŸäº›æ–¹é¢ï¼Œè°ƒè¯•åƒæ˜¯ä¾¦æ¢å·¥ä½œã€‚
ä½ é¢å¯¹ä¸€äº›çº¿ç´¢ï¼Œå¿…é¡»æ¨ç†å‡ºæ˜¯ä»€ä¹ˆè¿›ç¨‹ (processes) å’Œäº‹ä»¶ (events)å¯¼è‡´äº†ä½ çœ‹åˆ°çš„ç»“æœã€‚

%ğŸ% Debugging is also like an experimental science.  Once you have an idea
%ğŸ% about what is going wrong, you modify your program and try again.  If
%ğŸ% your hypothesis was correct, you can predict the result of the
%ğŸ% modification, and you take a step closer to a working program.  If
%ğŸ% your hypothesis was wrong, you have to come up with a new one.  As
%ğŸ% Sherlock Holmes pointed out, ``When you have eliminated the
%ğŸ% impossible, whatever remains, however improbable, must be the truth.''
%ğŸ% (A. Conan Doyle, {\em The Sign of Four})

è°ƒè¯•ä¹Ÿåƒæ˜¯ä¸€é—¨å®éªŒæ€§ç§‘å­¦ã€‚ä¸€æ—¦ä½ çŒœåˆ°å¤§æ¦‚å“ªé‡Œå‡ºé”™äº†ï¼Œ
ä½ å¯ä»¥ä¿®æ”¹ç¨‹åºï¼Œå†è¯•ä¸€æ¬¡ã€‚
å¦‚æœä½ çš„å‡è®¾æ˜¯æ­£ç¡®çš„ï¼Œé‚£ä¹ˆä½ å°±å¯ä»¥é¢„æµ‹åˆ°ä¿®æ”¹çš„ç»“æœï¼Œå¹¶ä¸”ç¦»æ­£å¸¸è¿è¡Œçš„ç¨‹åºåˆè¿‘äº†ä¸€æ­¥ã€‚
å¦‚æœä½ çš„å‡è®¾æ˜¯é”™è¯¯çš„ï¼Œä½ å°±ä¸å¾—ä¸å†æä¸€ä¸ªæ–°çš„å‡è®¾ã€‚
å¦‚å¤æ´›å…‹Â·ç¦å°”æ‘©æ–¯æ‰€æŒ‡å‡ºçš„ ``å½“ä½ æ’é™¤äº†æ‰€æœ‰çš„ä¸å¯èƒ½ï¼Œæ— è®ºå‰©ä¸‹çš„æ˜¯ä»€ä¹ˆï¼Œ
ä¸ç®¡å¤šä¹ˆéš¾ä»¥ç½®ä¿¡ï¼Œä¸€å®šå°±æ˜¯çœŸç›¸ã€‚''ï¼ˆé˜¿ç‘ŸÂ·æŸ¯å—Â·é“å°”ï¼Œã€Š{\em å››ç­¾å}ã€‹ï¼‰
\index{Holmes, Sherlock}  \index{Doyle, Arthur Conan}

%ğŸ% For some people, programming and debugging are the same thing.  That
%ğŸ% is, programming is the process of gradually debugging a program until
%ğŸ% it does what you want.  The idea is that you should start with a
%ğŸ% working program and make small modifications,
%ğŸ% debugging them as you go.

å¯¹æŸäº›äººæ¥è¯´ï¼Œç¼–ç¨‹å’Œè°ƒè¯•æ˜¯åŒä¸€ä»¶äº‹ã€‚
ä¹Ÿå°±æ˜¯è¯´ï¼Œç¼–ç¨‹æ˜¯é€æ­¥è°ƒè¯•ä¸€ä¸ªç¨‹åºï¼Œç›´åˆ°å®ƒæ»¡è¶³äº†ä½ æœŸå¾…çš„è¿‡ç¨‹ã€‚
è¿™æ„å‘³ç€ï¼Œä½ åº”è¯¥ä»ä¸€ä¸ªèƒ½ {\em æ­£å¸¸è¿è¡Œ} (working) çš„ç¨‹åºå¼€å§‹ï¼Œæ¯æ¬¡åªåšä¸€äº›å°æ”¹åŠ¨ï¼Œå¹¶åŒæ­¥è¿›è¡Œè°ƒè¯•ã€‚

%ğŸ% For example, Linux is an operating system that contains millions of
%ğŸ% lines of code, but it started out as a simple program Linus Torvalds
%ğŸ% used to explore the Intel 80386 chip.  According to Larry Greenfield,
%ğŸ% ``One of Linus's earlier projects was a program that would switch
%ğŸ% between printing AAAA and BBBB.  This later evolved to Linux.''
%ğŸ% ({\em The Linux Users' Guide} Beta Version 1).

ä¸¾ä¸ªä¾‹å­ï¼ŒLinuxæ˜¯ä¸€ä¸ªæœ‰ç€æ•°ç™¾ä¸‡è¡Œä»£ç çš„æ“ä½œç³»ç»Ÿ ä½†æ˜¯å®ƒä¸€å¼€å§‹ï¼Œåªæ˜¯Linus
Torvaldså†™çš„ä¸€ä¸ªç”¨äºç ”ç©¶Intel 80386èŠ¯ç‰‡çš„ç®€å•ç¨‹åºã€‚ æ ¹æ®Larry
Greenfieldçš„æè¿°ï¼Œâ€œLinusçš„æ—©æœŸé¡¹ç›®ä¸­ï¼Œæœ‰ä¸€ä¸ªèƒ½å¤Ÿäº¤æ›¿æ‰“å°AAAAå’ŒBBBBçš„ç¨‹åºã€‚
è¿™ä¸ªç¨‹åºåæ¥æ¼”å˜ä¸ºäº†Linuxã€‚â€ï¼ˆ {\em Linuxç”¨æˆ·æ‰‹å†Œ} Beta ç‰ˆæœ¬1ï¼‰ã€‚
\index{Linux}


%
%%
% \section{Glossary  |  æœ¯è¯­è¡¨}
\section{æœ¯è¯­è¡¨}

\begin{description}

%ğŸ% \item[function:] A named sequence of statements that performs some
%ğŸ% useful operation.  Functions may or may not take arguments and may or
%ğŸ% may not produce a result.
%ğŸ% \index{function}

\item[å‡½æ•° (function)ï¼š] æ‰§è¡ŒæŸç§æœ‰ç”¨è¿ç®—çš„å‘½åè¯­å¥åºåˆ—ã€‚å‡½æ•°å¯ä»¥æ¥å—å½¢å‚ï¼Œä¹Ÿå¯ä»¥ä¸æ¥å—ï¼›å¯ä»¥è¿”å›ä¸€ä¸ªç»“æœï¼Œä¹Ÿå¯ä»¥ä¸è¿”å›ã€‚
\index{function}  \index{å‡½æ•°}

%ğŸ% \item[function definition:]  A statement that creates a new function,
%ğŸ% specifying its name, parameters, and the statements it contains.
%ğŸ% \index{function definition}

\item[å‡½æ•°å®šä¹‰ (function definitionï¼š)] åˆ›å»ºä¸€ä¸ªæ–°å‡½æ•°çš„è¯­å¥ï¼ŒæŒ‡å®šäº†å‡½æ•°åã€å½¢å‚ä»¥åŠæ‰€åŒ…å«çš„è¯­å¥ã€‚
\index{function definition}  \index{å‡½æ•°å®šä¹‰}

%ğŸ% \item[function object:]  A value created by a function definition.
%ğŸ% The name of the function is a variable that refers to a function
%ğŸ% object.
%ğŸ% \index{function definition}

\item[å‡½æ•°å¯¹è±¡ (function object)ï¼š] å‡½æ•°å®šä¹‰æ‰€åˆ›å»ºçš„ä¸€ä¸ªå€¼ã€‚å‡½æ•°åæ˜¯ä¸€ä¸ªæŒ‡å‘å‡½æ•°å¯¹è±¡çš„å˜é‡ã€‚
\index{function object}  \index{å‡½æ•°å¯¹è±¡}

%ğŸ% \item[header:] The first line of a function definition.
%ğŸ% \index{header}

\item[å‡½æ•°å¤´ (header)ï¼š] å‡½æ•°å®šä¹‰çš„ç¬¬ä¸€è¡Œã€‚
\index{header}  \index{å‡½æ•°å¤´}

%ğŸ% \item[body:] The sequence of statements inside a function definition.
%ğŸ% \index{body}

\item[å‡½æ•°ä½“ (body)ï¼š] å‡½æ•°å®šä¹‰å†…éƒ¨çš„è¯­å¥åºåˆ—ã€‚
\index{body}  \index{å‡½æ•°ä½“}

%ğŸ% \item[parameter:] A name used inside a function to refer to the value
%ğŸ% passed as an argument.
%ğŸ% \index{parameter}

\item[å½¢å‚ (parameters)ï¼š] å‡½æ•°å†…éƒ¨ç”¨äºæŒ‡å‘è¢«ä¼ ä½œå®å‚çš„å€¼çš„åå­—ã€‚
\index{parameter}  \index{å½¢å‚}

%ğŸ% \item[function call:] A statement that runs a function. It
%ğŸ% consists of the function name followed by an argument list in
%ğŸ% parentheses.
%ğŸ% \index{function call}

\item[å‡½æ•°è°ƒç”¨ (function call) ï¼š] è¿è¡Œä¸€ä¸ªå‡½æ•°çš„è¯­å¥ã€‚å®ƒåŒ…æ‹¬äº†å‡½æ•°åï¼Œç´§éšå…¶åçš„å®å‚åˆ—è¡¨ï¼Œå®å‚ç”¨åœ†æ‹¬å·åŒ…å›´èµ·æ¥ã€‚
\index{function call}  \index{å‡½æ•°è°ƒç”¨}

%ğŸ% \item[argument:]  A value provided to a function when the function is called. This value is assigned to the corresponding parameter in the function.

\item[å®å‚ (argument) ï¼š] å‡½æ•°è°ƒç”¨æ—¶ä¼ ç»™å‡½æ•°çš„å€¼ã€‚è¿™ä¸ªå€¼è¢«èµ‹ç»™å‡½æ•°ä¸­ç›¸å¯¹åº”çš„å½¢å‚ã€‚
\index{argument}  \index{å®å‚}

%ğŸ% \item[local variable:]  A variable defined inside a function.  A local
%ğŸ% variable can only be used inside its function.

\item[å±€éƒ¨å˜é‡ (local variable)ï¼š] å‡½æ•°å†…éƒ¨å®šä¹‰çš„å˜é‡ã€‚å±€éƒ¨å˜é‡åªèƒ½åœ¨å‡½æ•°å†…éƒ¨ä½¿ç”¨ã€‚
\index{local variable}  \index{å±€éƒ¨å˜é‡}

%ğŸ% \item[return value:]  The result of a function.  If a function call
%ğŸ% is used as an expression, the return value is the value of
%ğŸ% the expression.

\item[è¿”å›å€¼ (return value)ï¼š] å‡½æ•°æ‰§è¡Œçš„ç»“æœã€‚å¦‚æœå‡½æ•°è°ƒç”¨è¢«ç”¨ä½œè¡¨è¾¾å¼ï¼Œå…¶è¿”å›å€¼æ˜¯è¿™ä¸ªè¡¨è¾¾å¼çš„å€¼ã€‚
\index{return value}  \index{è¿”å›å€¼}

%ğŸ% \item[fruitful function:] A function that returns a value.
%ğŸ% \index{fruitful function}

\item[æœ‰è¿”å›å€¼å‡½æ•° (fruitful function)ï¼š] ä¼šè¿”å›ä¸€ä¸ªå€¼çš„å‡½æ•°ã€‚
\index{fruitful function}  \index{æœ‰è¿”å›å€¼å‡½æ•°}

%ğŸ% \item[void function:] A function that always returns {\tt None}.

\item[æ— è¿”å›å€¼å‡½æ•° (void function)ï¼š]     æ€»æ˜¯è¿”å›Noneçš„å‡½æ•°ã€‚
\index{void function}  \index{æ— è¿”å›å€¼å‡½æ•°}

%ğŸ% \item[{\tt None}:]  A special value returned by void functions.

\item[\tt Noneï¼š] æ— è¿”å›å€¼å‡½æ•°è¿”å›çš„ä¸€ä¸ªç‰¹æ®Šå€¼ã€‚
\index{None special value}  \index{special value!None}
\index{None ç‰¹æ®Šå€¼}  \index{ç‰¹æ®Šå€¼!None}

%ğŸ% \item[module:] A file that contains a
%ğŸ% collection of related functions and other definitions.

\item[æ¨¡å— (module)ï¼š] åŒ…å«äº†ä¸€ç»„ç›¸å…³å‡½æ•°åŠå…¶ä»–å®šä¹‰çš„çš„æ–‡ä»¶ã€‚
\index{module}

%ğŸ% \item[import statement:] A statement that reads a module file and creates
%ğŸ% a module object.

\item[å¯¼å…¥è¯­å¥ (import statement)ï¼š] è¯»å–ä¸€ä¸ªæ¨¡å—æ–‡ä»¶ï¼Œå¹¶åˆ›å»ºä¸€ä¸ªæ¨¡å—å¯¹è±¡çš„è¯­å¥ã€‚
\index{import statement}  \index{statement!import}
\index{å¯¼å…¥è¯­å¥}  \index{è¯­å¥!å¯¼å…¥}

%ğŸ% \item[module object:] A value created by an {\tt import} statement
%ğŸ% that provides access to the values defined in a module.

\item[æ¨¡å—å¯¹è±¡ (module object)ï¼š] å¯¼å…¥è¯­å¥åˆ›å»ºçš„ä¸€ä¸ªå€¼ï¼Œ å¯ä»¥è®©å¼€å‘è€…è®¿é—®æ¨¡å—å†…éƒ¨å®šä¹‰çš„å€¼ã€‚
\index{module}  \index{æ¨¡å—}

%ğŸ% \item[dot notation:]  The syntax for calling a function in another
%ğŸ% module by specifying the module name followed by a dot (period) and
%ğŸ% the function name.

\item[ç‚¹æ ‡è®°æ³• (dot notation)ï¼š] è°ƒç”¨å¦ä¸€ä¸ªæ¨¡å—ä¸­å‡½æ•°çš„è¯­æ³•ï¼Œéœ€è¦æŒ‡å®šæ¨¡å—åç§°ï¼Œä¹‹åè·Ÿç€ä¸€ä¸ªç‚¹ï¼ˆå¥å·ï¼‰å’Œå‡½æ•°åã€‚
\index{dot notation}  \index{ç‚¹æ ‡è®°æ³•}

%ğŸ% \item[composition:] Using an expression as part of a larger expression,
%ğŸ% or a statement as part of a larger statement.

\item[ç»„åˆ (composition)ï¼š] å°†ä¸€ä¸ªè¡¨è¾¾å¼åµŒå…¥ä¸€ä¸ªæ›´é•¿çš„è¡¨è¾¾å¼ï¼Œæˆ–è€…æ˜¯å°†ä¸€ä¸ªè¯­å¥åµŒå…¥ä¸€ä¸ªæ›´é•¿è¯­å¥çš„ä¸€éƒ¨åˆ†ã€‚
\index{composition}  \index{ç»„åˆ}

%ğŸ% \item[flow of execution:]  The order statements run in.

\item[æ‰§è¡Œæµç¨‹ (flow of execution)ï¼š] è¯­å¥æ‰§è¡Œçš„é¡ºåºã€‚
\index{flow of execution}  \index{æ‰§è¡Œæµç¨‹}

%ğŸ% \item[stack diagram:]  A graphical representation of a stack of functions,
%ğŸ% their variables, and the values they refer to.

\item[å †æ ˆå›¾ (stack diagram)ï¼š] ä¸€ç§å›¾å½¢åŒ–è¡¨ç¤ºå †æ ˆçš„æ–¹æ³•ï¼Œå †æ ˆä¸­åŒ…æ‹¬å‡½æ•°ã€å‡½æ•°çš„å˜é‡åŠå…¶æ‰€æŒ‡å‘çš„å€¼ã€‚
\index{stack diagram}  \index{å †æ ˆå›¾}

%ğŸ% \item[frame:]  A box in a stack diagram that represents a function call.
%ğŸ% It contains the local variables and parameters of the function.

\item[æ ˆå¸§ (frame) ï¼š] å †æ ˆå›¾ä¸­ä¸€ä¸ªæ ˆå¸§ï¼Œä»£è¡¨ä¸€ä¸ªå‡½æ•°è°ƒç”¨ã€‚å…¶ä¸­åŒ…å«äº†å‡½æ•°çš„å±€éƒ¨å˜é‡å’Œå½¢å‚ã€‚
\index{function frame}  \index{frame}
\index{å‡½æ•°æ ˆå¸§}  \index{æ ˆå¸§}

%ğŸ% \item[traceback:]  A list of the functions that are executing,
%ğŸ% printed when an exception occurs.

\item[å›æº¯ (traceback) ï¼š] å½“å‡ºç°å¼‚å¸¸æ—¶ï¼Œè§£é‡Šå™¨æ‰“å°å‡ºçš„å‡ºé”™æ—¶æ­£åœ¨æ‰§è¡Œçš„å‡½æ•°åˆ—è¡¨ã€‚
\index{traceback}  \index{å›æº¯}

\end{description}


%
%%
% \section{Exercises  |  ç»ƒä¹ }
\section{ç»ƒä¹ }

\begin{exercise}
\index{len function}  \index{function!len}

%ğŸ% Write a function named \verb"right_justify" that takes a string
%ğŸ% named {\tt s} as a parameter and prints the string with enough
%ğŸ% leading spaces so that the last letter of the string is in column 70
%ğŸ% of the display.

ç¼–å†™ä¸€ä¸ªåä¸º {\em \li{right_justify}} çš„å‡½æ•°ï¼Œå‡½æ•°æ¥å—ä¸€ä¸ªåä¸º {\em \li{s}}çš„å­—ç¬¦ä¸²ä½œä¸ºå½¢å‚ï¼Œ å¹¶åœ¨æ‰“å°è¶³å¤Ÿå¤šçš„å‰å¯¼ç©ºæ ¼ {\em (leading space)} ä¹‹åæ‰“å°è¿™ä¸ªå­—ç¬¦ä¸²ï¼Œä½¿å¾—å­—ç¬¦ä¸²çš„æœ€åä¸€ä¸ªå­—æ¯ä½äºæ˜¾ç¤ºå±çš„ç¬¬ {\em 70} åˆ—ã€‚

\begin{em}
\begin{lstlisting}
>>> right_justify('monty')
                                                                 monty
\end{lstlisting}
\end{em}

%ğŸ% Hint: Use string concatenation and repetition.  Also,
%ğŸ% Python provides a built-in function called {\tt len} that
%ğŸ% returns the length of a string, so the value of \verb"len('monty')" is 5.

æç¤ºï¼šä½¿ç”¨å­—ç¬¦ä¸²æ‹¼æ¥ {\em (string concatenation)} å’Œé‡å¤ã€‚ å¦å¤–ï¼Œ{\em Python}æä¾›äº†ä¸€ä¸ªåå« {\em \li{len}} çš„å†…å»ºå‡½æ•°ï¼Œå¯ä»¥è¿”å›ä¸€ä¸ªå­—ç¬¦ä¸²çš„é•¿åº¦ï¼Œå› æ­¤ {\em \li{len('allen')}} çš„å€¼æ˜¯ {\em 5}ã€‚

\end{exercise}


\begin{exercise}
\index{function object}  \index{object!function}

%ğŸ% A function object is a value you can assign to a variable
%ğŸ% or pass as an argument.  For example, \verb"do_twice" is a function
%ğŸ% that takes a function object as an argument and calls it twice:

å‡½æ•°å¯¹è±¡æ˜¯ä¸€ä¸ªå¯ä»¥èµ‹å€¼ç»™å˜é‡çš„å€¼ï¼Œä¹Ÿå¯ä»¥ä½œä¸ºå®å‚ä¼ é€’ã€‚ä¾‹å¦‚ï¼Œ
{\em \li{do_twice}} å‡½æ•°æ¥å—å‡½æ•°å¯¹è±¡ä½œä¸ºå®å‚ï¼Œå¹¶è°ƒç”¨è¿™ä¸ªå‡½æ•°å¯¹è±¡ä¸¤æ¬¡ï¼š

\begin{em}
\begin{lstlisting}
def do_twice(f):
    f()
    f()
\end{lstlisting}
\end{em}
%ğŸ% Here's an example that uses \verb"do_twice" to call a function
%ğŸ% named \verb"print_spam" twice.


ä¸‹é¢è¿™ä¸ªç¤ºä¾‹ä½¿ç”¨ {\em \li{do_twice}} æ¥è°ƒç”¨åä¸º {\em \li{print_spam}} çš„å‡½æ•°ä¸¤æ¬¡ã€‚

\begin{em}
\begin{lstlisting}
def print_spam():
    print('spam')

do_twice(print_spam)
\end{lstlisting}
\end{em}

%ğŸ% \begin{enumerate}
%ğŸ%
%ğŸ% \item Type this example into a script and test it.
%ğŸ%
%ğŸ% \item Modify \verb"do_twice" so that it takes two arguments, a
%ğŸ% function object and a value, and calls the function twice,
%ğŸ% passing the value as an argument.
%ğŸ%
%ğŸ% \item Copy the definition of
%ğŸ% \verb"print_twice" from earlier in this chapter to your script.
%ğŸ%
%ğŸ% \item Use the modified version of \verb"do_twice" to call
%ğŸ% \verb"print_twice" twice, passing \verb"'spam'" as an argument.
%ğŸ%
%ğŸ% \item Define a new function called
%ğŸ% \verb"do_four" that takes a function object and a value
%ğŸ% and calls the function four times, passing the value
%ğŸ% as a parameter.  There should be only
%ğŸ% two statements in the body of this function, not four.
%ğŸ%
%ğŸ% \end{enumerate}

\begin{enumerate}

\item å°†è¿™ä¸ªç¤ºä¾‹å†™å…¥è„šæœ¬ï¼Œå¹¶æµ‹è¯•ã€‚

\item ä¿®æ”¹ {\em \li{do_twice}}ï¼Œä½¿å…¶æ¥å—ä¸¤ä¸ªå®å‚ï¼Œä¸€ä¸ªæ˜¯å‡½æ•°å¯¹è±¡ï¼Œå¦ä¸€ä¸ªæ˜¯å€¼ã€‚
   ç„¶åè°ƒç”¨è¿™ä¸€å‡½æ•°å¯¹è±¡ä¸¤æ¬¡ï¼Œå°†é‚£ä¸ªå€¼ä¼ é€’ç»™å‡½æ•°å¯¹è±¡ä½œä¸ºå®å‚ã€‚

\item ä»æœ¬ç« å‰é¢ä¸€äº›çš„ç¤ºä¾‹ä¸­ï¼Œå°† {\em \li{print_twice}} å‡½æ•°çš„å®šä¹‰å¤åˆ¶åˆ°è„šæœ¬ä¸­ã€‚

\item ä½¿ç”¨ä¿®æ”¹è¿‡çš„ {\em \li{do_twice}} ï¼Œè°ƒç”¨ {\em \li{print_twice}} ä¸¤æ¬¡ï¼Œå°† {\em \li{spam}} ä¼ é€’ç»™å®ƒä½œä¸ºå®å‚ã€‚

\item å®šä¹‰ä¸€ä¸ªåä¸º {\em \li{do_four}} çš„æ–°å‡½æ•°ï¼Œå…¶æ¥å—ä¸€ä¸ªå‡½æ•°å¯¹è±¡å’Œä¸€ä¸ªå€¼ä½œä¸ºå®å‚ã€‚ è°ƒç”¨è¿™ä¸ªå‡½æ•°å¯¹è±¡å››æ¬¡ï¼Œå°†é‚£ä¸ªå€¼ä½œä¸ºå½¢å‚ä¼ é€’ç»™å®ƒã€‚ å‡½æ•°ä½“ä¸­åº”è¯¥åªæœ‰ä¸¤æ¡è¯­å¥ï¼Œè€Œä¸æ˜¯å››æ¡ã€‚

\end{enumerate}

%ğŸ% Solution: \href{http://thinkpython2.com/code/do_four.py}{Solution}.

\href{http://thinkpython2.com/code/do_four.py}{å‚è€ƒç­”æ¡ˆ}

\end{exercise}



\begin{exercise}

%ğŸ% Note: This exercise should be done using only the statements and other features we have learned so far.

æ³¨æ„ï¼šè¯·ä½¿ç”¨æˆ‘ä»¬ç›®å‰å­¦è¿‡çš„è¯­å¥å’Œç‰¹æ€§æ¥å®Œæˆæœ¬é¢˜ã€‚

%ğŸ% \begin{enumerate}

%ğŸ% \item Write a function that draws a grid like the following:
%ğŸ% \index{grid}

%ğŸ% \begin{lstlisting}
%ğŸ% + - - - - + - - - - +
%ğŸ% |         |         |
%ğŸ% |         |         |
%ğŸ% |         |         |
%ğŸ% |         |         |
%ğŸ% + - - - - + - - - - +
%ğŸ% |         |         |
%ğŸ% |         |         |
%ğŸ% |         |         |
%ğŸ% |         |         |
%ğŸ% + - - - - + - - - - +
%ğŸ% \end{lstlisting}
%ğŸ% %
%ğŸ% Hint: to print more than one value on a line, you can print
%ğŸ% a comma-separated sequence of values:
%ğŸ%
%ğŸ% \begin{lstlisting}
%ğŸ% print('+', '-')
%ğŸ% \end{lstlisting}
%ğŸ% %
%ğŸ% By default, {\tt print} advances to the next line, but you
%ğŸ% can override that behavior and put a space at the end, like this:
%ğŸ%
%ğŸ% \begin{lstlisting}
%ğŸ% print('+', end=' ')
%ğŸ% print('-')
%ğŸ% \end{lstlisting}
%ğŸ% %
%ğŸ% The output of these statements is \verb"'+ -'".
%ğŸ%
%ğŸ% A {\tt print} statement with no argument ends the current line and
%ğŸ% goes to the next line.
%ğŸ%
%ğŸ% \item Write a function that draws a similar grid
%ğŸ% with four rows and four columns.
%ğŸ%
%ğŸ% \end{enumerate}


\begin{enumerate}

\item ç¼–å†™ä¸€ä¸ªèƒ½ç”»å‡ºå¦‚ä¸‹ç½‘æ ¼ {\em (grid)} çš„å‡½æ•°ï¼š
\index{grid}

\begin{em}
\begin{lstlisting}
+ - - - - + - - - - +
|         |         |
|         |         |
|         |         |
|         |         |
+ - - - - + - - - - +
|         |         |
|         |         |
|         |         |
|         |         |
+ - - - - + - - - - +
\end{lstlisting}
\end{em}

%
æç¤ºï¼šä½ å¯ä»¥ä½¿ç”¨ä¸€ä¸ªç”¨é€—å·åˆ†éš”çš„å€¼åºåˆ—ï¼Œåœ¨ä¸€è¡Œä¸­æ‰“å°å‡ºå¤šä¸ªå€¼ï¼š

\begin{em}
\begin{lstlisting}
print('+', '-')
\end{lstlisting}
\end{em}

%
{\em \li{print}} å‡½æ•°é»˜è®¤ä¼šè‡ªåŠ¨æ¢è¡Œï¼Œä½†æ˜¯ä½ å¯ä»¥é˜»æ­¢è¿™ä¸ªè¡Œä¸ºï¼Œåªéœ€è¦åƒä¸‹é¢è¿™æ ·å°†è¡Œç»“å°¾å˜æˆä¸€ä¸ªç©ºæ ¼ï¼š

\begin{em}
\begin{lstlisting}
print('+', end=' ')
print('-')
\end{lstlisting}
\end{em}

%
è¿™ä¸¤ä¸ªè¯­å¥çš„è¾“å‡ºç»“æœæ˜¯ {\em \li{+ -'}}ã€‚

ä¸€ä¸ªæ²¡æœ‰ä¼ å…¥å®å‚çš„ {\em \li{print}} è¯­å¥ä¼šç»“æŸå½“å‰è¡Œï¼Œè·³åˆ°ä¸‹ä¸€è¡Œã€‚

\item ç¼–å†™ä¸€ä¸ªèƒ½å¤Ÿç”»å‡ºå››è¡Œå››åˆ—çš„ç±»ä¼¼ç½‘æ ¼çš„å‡½æ•°ã€‚

\end{enumerate}


\href{http://thinkpython2.com/code/grid.py}{å‚è€ƒç­”æ¡ˆ}

%ğŸ%  Credit: This exercise is based on an exercise in Oualline, {\em
%ğŸ%      Practical C Programming, Third Edition}, O'Reilly Media, 1997.

è‡´è°¢ï¼šè¿™ä¸ªä¹ é¢˜åŸºäº {\em Practical C Programming, Third
Edition} ä¸€ä¹¦ä¸­çš„ä¹ é¢˜æ”¹ç¼–ï¼Œè¯¥ä¹¦ç”± {\em Oâ€™Reilly} å‡ºç‰ˆç¤¾äº{\em 1997}å¹´å‡ºç‰ˆã€‚

\end{exercise}

